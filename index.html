<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adworth Demo - See Who's Targeting You</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <nav class="bg-white shadow mb-6">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <a href="https://adworth.app" class="text-2xl font-bold text-green-700">‚Üê Back to Adworth</a>
        </div>
    </nav>

    <!-- Demo Disclaimer -->
    <div class="max-w-2xl mx-auto px-8 mb-6">
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <p class="text-sm text-blue-800">
                <strong>üìä Demo Version:</strong> This MVP uses sample ads for demonstration. 
                The full product will display real ads from Meta, Google, and X's DSA repositories.
            </p>
        </div>
    </div>

    <!-- Profile Form (shows first) -->
    <div id="profile-section" class="max-w-2xl mx-auto p-8">
        <h1 class="text-4xl font-bold mb-4">See Who's Targeting You</h1>
        <p class="text-gray-600 mb-8">Enter your profile to see sample ads that match your demographics</p>
        
        <form id="profile-form" class="space-y-4 bg-white p-6 rounded-lg shadow">
            <div>
                <label class="block mb-2 font-semibold">Age Range</label>
                <select id="age" class="w-full p-3 border rounded">
                    <option value="18-24">18-24</option>
                    <option value="25-34">25-34</option>
                    <option value="35-44">35-44</option>
                    <option value="45-54">45-54</option>
                    <option value="55+">55+</option>
                </select>
            </div>
            
            <div>
                <label class="block mb-2 font-semibold">Location</label>
                <select id="location" class="w-full p-3 border rounded">
                    <option value="US">United States</option>
                    <option value="UK">United Kingdom</option>
                    <option value="CA">Canada</option>
                    <option value="EU">European Union</option>
                </select>
            </div>
            
            <div>
                <label class="block mb-2 font-semibold">Gender</label>
                <select id="gender" class="w-full p-3 border rounded">
                    <option value="all">All</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                </select>
            </div>
            
            <button type="submit" class="w-full bg-green-700 text-white p-4 rounded-lg font-bold text-lg hover:bg-green-800 transition">
                Show My Ads ‚Üí
            </button>
        </form>
        
        <p class="text-center text-gray-500 text-sm mt-4">
            ‚ö° Takes 30 seconds ‚Ä¢ No email required ‚Ä¢ 100% private
        </p>
    </div>

    <!-- Results (hidden until form submitted) -->
    <div id="results-section" class="hidden max-w-6xl mx-auto p-8">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-3xl font-bold">Ads Targeting You</h2>
            <button onclick="location.reload()" class="text-green-700 font-semibold hover:text-green-800">
                ‚Üê Start Over
            </button>
        </div>
        <div id="ads-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Ads will be inserted here -->
        </div>
    </div>

    <script>
        // Load ads data
        let adsData = [];
        fetch('./data/ads.json')
            .then(r => r.json())
            .then(data => {
                adsData = data;
                console.log('Loaded', adsData.length, 'ads');
            })
            .catch(err => {
                console.error('Error loading ads:', err);
                alert('Error loading ad data. Make sure ads.json exists in the data folder.');
            });

        // Handle form submission
        document.getElementById('profile-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const profile = {
                age: document.getElementById('age').value,
                location: document.getElementById('location').value,
                gender: document.getElementById('gender').value
            };
            
            // Filter ads by location
            const matchingAds = adsData.filter(ad => 
                ad.targeting.locations.includes(profile.location)
            );
            
            if (matchingAds.length === 0) {
                alert('No ads found for your location. Try a different location.');
                return;
            }
            
            // Display results
            displayAds(matchingAds);
            
            // Show results, hide form
            document.getElementById('profile-section').classList.add('hidden');
            document.getElementById('results-section').classList.remove('hidden');
        });

        function displayAds(ads) {
            const container = document.getElementById('ads-container');
            container.innerHTML = ads.map(ad => `
                <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition">
                    <img src="${ad.image_url}" alt="${ad.company} ad" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-700 font-bold mr-3">
                                ${ad.company.charAt(0)}
                            </div>
                            <div>
                                <h3 class="font-bold text-lg">${ad.company}</h3>
                                <p class="text-xs text-gray-500">Meta Ads</p>
                            </div>
                        </div>
                        <p class="text-gray-700 mb-4">${ad.ad_text}</p>
                        <div class="border-t pt-4">
                            <p class="text-xs font-semibold text-gray-600 mb-2">WHY YOU'RE SEEING THIS:</p>
                            <p class="text-sm text-gray-600">
                                Targets ${ad.targeting.age_min}-${ad.targeting.age_max} year olds in 
                                ${ad.targeting.locations.join(', ')}${ad.targeting.interests ? ' interested in ' + ad.targeting.interests.join(', ') : ''}
                            </p>
                        </div>
                    </div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
    </div>

    <!-- Profile Form (shows first) -->
    <div id="profile-section" class="max-w-2xl mx-auto p-8">
        <h1 class="text-4xl font-bold mb-4">See Who's Targeting You</h1>
        <p class="text-gray-600 mb-8">Enter your profile to see sample ads that match your demographics</p>
        
        <form id="profile-form" class="space-y-4 bg-white p-6 rounded-lg shadow">
            <div>
                <label class="block mb-2 font-semibold">Age Range</label>
                <select id="age" class="w-full p-3 border rounded">
                    <option value="18-24">18-24</option>
                    <option value="25-34">25-34</option>
                    <option value="35-44">35-44</option>
                    <option value="45-54">45-54</option>
                    <option value="55+">55+</option>
                </select>
            </div>
            
            <div>
                <label class="block mb-2 font-semibold">Location</label>
                <select id="location" class="w-full p-3 border rounded">
                    <option value="US">United States</option>
                    <option value="UK">United Kingdom</option>
                    <option value="CA">Canada</option>
                    <option value="EU">European Union</option>
                </select>
            </div>
            
            <div>
                <label class="block mb-2 font-semibold">Gender</label>
                <select id="gender" class="w-full p-3 border rounded">
                    <option value="all">All</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                </select>
            </div>
            
            <button type="submit" class="w-full bg-green-700 text-white p-4 rounded-lg font-bold text-lg hover:bg-green-800 transition">
                Show My Ads ‚Üí
            </button>
        </form>
        
        <p class="text-center text-gray-500 text-sm mt-4">
            ‚ö° Takes 30 seconds ‚Ä¢ No email required ‚Ä¢ 100% private
        </p>
    </div>

    <!-- Results (hidden until form submitted) -->
    <div id="results-section" class="hidden max-w-6xl mx-auto p-8">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-3xl font-bold">Ads Targeting You</h2>
            <button onclick="location.reload()" class="text-green-700 font-semibold hover:text-green-800">
                ‚Üê Start Over
            </button>
        </div>
        <div id="ads-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Ads will be inserted here -->
        </div>
    </div>

    <script>
        // Load ads data
        let adsData = [];
        fetch('./data/ads.json')
            .then(r => r.json())
            .then(data => {
                adsData = data;
                console.log('Loaded', adsData.length, 'ads');
            })
            .catch(err => {
                console.error('Error loading ads:', err);
                alert('Error loading ad data. Make sure ads.json exists in the data folder.');
            });

        // Handle form submission
        document.getElementById('profile-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const profile = {
                age: document.getElementById('age').value,
                location: document.getElementById('location').value,
                gender: document.getElementById('gender').value
            };
            
            // Filter ads by location
            const matchingAds = adsData.filter(ad => 
                ad.targeting.locations.includes(profile.location)
            );
            
            if (matchingAds.length === 0) {
                alert('No ads found for your location. Try a different location.');
                return;
            }
            
            // Display results
            displayAds(matchingAds);
            
            // Show results, hide form
            document.getElementById('profile-section').classList.add('hidden');
            document.getElementById('results-section').classList.remove('hidden');
        });

        function displayAds(ads) {
            const container = document.getElementById('ads-container');
            container.innerHTML = ads.map(ad => `
                <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition">
                    <img src="${ad.image_url}" alt="${ad.company} ad" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-700 font-bold mr-3">
                                ${ad.company.charAt(0)}
                            </div>
                            <div>
                                <h3 class="font-bold text-lg">${ad.company}</h3>
                                <p class="text-xs text-gray-500">Meta Ads</p>
                            </div>
                        </div>
                        <p class="text-gray-700 mb-4">${ad.ad_text}</p>
                        <div class="border-t pt-4">
                            <p class="text-xs font-semibold text-gray-600 mb-2">WHY YOU'RE SEEING THIS:</p>
                            <p class="text-sm text-gray-600">
                                Targets ${ad.targeting.age_min}-${ad.targeting.age_max} year olds in 
                                ${ad.targeting.locations.join(', ')}${ad.targeting.interests ? ' interested in ' + ad.targeting.interests.join(', ') : ''}
                            </p>
                        </div>
                    </div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
